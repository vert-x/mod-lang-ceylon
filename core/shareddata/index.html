<!DOCTYPE html><html><head><meta charset='UTF-8'/>
<title>Package [io, vertx, ceylon, core, shareddata]</title><link href='../.resources/favicon.ico' rel='shortcut icon'/>
<link href='../.resources/shCore.css' rel='stylesheet' type='text/css'/>
<link href='../.resources/shThemeDefault.css' rel='stylesheet' type='text/css'/>
<link href='../.resources/bootstrap.min.css' rel='stylesheet' type='text/css'/>
<link href='../.resources/ceylondoc.css' rel='stylesheet' type='text/css'/>
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro|Inconsolata' rel='stylesheet' type='text/css'/>
</head><body><div class='navbar navbar-inverse navbar-static-top'><div class='navbar-inner'><a class='module-header' href='../index.html'><i class='module-logo'></i><span class='module-label'>module</span><span class='module-name'>io.vertx.ceylon.core</span><span class='module-version'>0.4.0</span></a><ul class='nav pull-right'><li class='divider-vertical' /><li><a class='expand-all' href='#' title='Expand All [Shortcut: + plus]'><i class='icon-expand-all'></i></a></li><li><a class='collapse-all' href='#' title='Collapse All [Shortcut: - minus]'><i class='icon-collapse-all'></i></a></li><li id='infoDropdown' class='dropdown'><a href='#' title='Show keyboard shortcuts [Shortcut: ?]' role='button' class='dropdown-toggle' data-toggle='dropdown'><i class='icon-info'></i></a><ul id='info-dropdown-panel' class='dropdown-menu'><h4>Keyboard Shortcuts</h4><li class='divider'></li><div class='row-fluid'><div id='info-common-shortcuts' class='span6'><div id='f'><span class='key badge'>f</span><span class='info muted'>Open filter by tags</span></div><div id='s'><span class='key badge'>s</span><span class='info muted'>Open search page</span></div><div id='?'><span class='key badge'>?</span><span class='info muted'>Open this information panel</span></div></div><div id='info-expand-collapse-shortcuts' class='span6'><div id='+'><span class='key badge'>+</span><span class='info muted'>Expand all</span></div><div id='-'><span class='key badge'>-</span><span class='info muted'>Collapse all</span></div></div></div><li class='divider'></li><div class='row-fluid'><div id='info-doc-shortcuts' class='span6'><h5>Documentation:</h5><div id='o'><span class='key badge'>o</span><span class='info muted'>Jump to module documentation</span></div><div id='p'><span class='key badge'>p</span><span class='info muted'>Jump to package documentation</span></div><div id='l'><span class='key badge'>l</span><span class='info muted'>Jump to aliases</span></div><div id='n'><span class='key badge'>n</span><span class='info muted'>Jump to annotations</span></div><div id='z'><span class='key badge'>z</span><span class='info muted'>Jump to initializer</span></div><div id='v'><span class='key badge'>v</span><span class='info muted'>Jump to values</span></div><div id='f'><span class='key badge'>f</span><span class='info muted'>Jump to functions</span></div><div id='i'><span class='key badge'>i</span><span class='info muted'>Jump to interfaces</span></div><div id='c'><span class='key badge'>c</span><span class='info muted'>Jump to classes</span></div><div id='e'><span class='key badge'>e</span><span class='info muted'>Jump to exceptions</span></div></div><div id='info-search-shortcuts' class='span6'><h5>Search page:</h5><div id='enter'><span class='key badge'>enter</span><span class='info muted'>Jump to selected declaration</span></div><div id='esc'><span class='key badge'>esc</span><span class='info muted'>Clear search query/Go to overview</span></div><div id='up'><span class='key badge'>up</span><span class='info muted'>Move selection up</span></div><div id='down'><span class='key badge'>down</span><span class='info muted'>Move selection down</span></div></div></div></ul></li></ul><ul class='nav pull-right'><li class='divider-vertical' /><li><a href='../search.html' title='Search this module [Shortcut: S]'><i class='icon-search'></i>Search</a></li></ul><ul class='nav pull-right'><li class='divider-vertical' /><li id='filterDropdown' class='dropdown'><a href='#' title='Filter declarations by tags [Shortcut: F]' role='button' class='dropdown-toggle' data-toggle='dropdown'><i class='icon-filter'></i>Filter <span id='filterDropdownLinkInfo'></span> <b class='caret'></b></a><ul id='filterDropdownPanel' class='dropdown-menu'><h4 id='filterDropdownPanelInfo'>Filter declarations by tags</h4><li class='divider'></li><div id='filterDropdownPanelTags'></div><li class='divider'></li><div id='filterActions'><a id='filterActionAll'>All</a><a id='filterActionNone'>None</a><a id='filterActionMore'>Show more</a></div></ul></li></ul></div></div><div class='sub-navbar'><div class='sub-navbar-inner'><span class='sub-navbar-label'>package</span><i class='icon-package'></i><span class='sub-navbar-name'><a class='link' href='../index.html#section-package' title='Go to package io.vertx.ceylon.core'>io.vertx.ceylon.core</a>.<a class='link-custom-text' href='../shareddata/index.html' title='Go to package io.vertx.ceylon.core.shareddata'>shareddata</a></span></div><div class='sub-navbar-menu'><a href='../index.html'><span title='Jump to module documentation [Shortcut: O]'><span class='accesskey'>O</span>verview</span></a><a href='#section-interfaces'><span title='Jump to interfaces [Shortcut: I]'><span class='accesskey'>I</span>nterfaces</span></a><a href='#section-classes'><span title='Jump to classes [Shortcut: C]'><span class='accesskey'>C</span>lasses</span></a></div></div><div class='container-fluid'><div class='package-description'><div class='doc'><h1>Shared Data</h1>
<p>Sometimes it makes sense to allow different verticles instances to share data in a safe way. Vert.x allows simple
<a class='link' href='../shareddata/SharedMap.type.html' title='Go to io.vertx.ceylon.core.shareddata::SharedMap'>SharedMap</a> (like a <span title='java.util.concurrent::ConcurrentMap'>java.util.concurrent::ConcurrentMap</span> and <a class='link' href='../shareddata/SharedSet.type.html' title='Go to io.vertx.ceylon.core.shareddata::SharedSet'>SharedSet</a> data structures to be shared between
verticles.</p>
<p>There is a caveat: To prevent issues due to mutable data, Vert.x only allows simple immutable types such as
number, boolean and string or Buffer to be used in shared data. With a Buffer, it is automatically copied
when retrieved from the shared data, so different verticle instances never see the same object instance.</p>
<p>Currently data can only be shared between verticles in the same Vert.x instance. In later versions of Vert.x
we aim to extend this to allow data to be shared by all Vert.x instances in the cluster.</p>
<h2>Shared Maps</h2>
<p>To use a shared map to share data between verticles first we get a reference to the map, and then use it like
any other instance of <a class='link' href='../shareddata/SharedMap.type.html' title='Go to io.vertx.ceylon.core.shareddata::SharedMap'>SharedMap</a></p>
<pre>SharedMap&lt;String, Integer&gt; map = vertx.sharedData.getMap("demo.mymap");

map.put("some-key", 123);
</pre>
<p>And then, in a different verticle you can access it:</p>
<pre>SharedMap&lt;String, Integer&gt; map = vertx.sharedData.getMap("demo.mymap");

// etc
</pre>
<h2>Shared Sets</h2>
<p>To use a shared set to share data between verticles first we get a reference to the set.</p>
<pre>SharedSet&lt;String&gt; set = vertx.sharedData.getSet("demo.myset");

set.add("some-value");
</pre>
<p>And then, in a different verticle:</p>
<pre>SharedSet&lt;String&gt; set = vertx.sharedData.getSet("demo.myset");

// etc
</pre>
</div></div><table id='section-interfaces' class='table table-condensed table-bordered table-hover'><thead><tr class='table-header' title='Click for expand/collapse'><td colspan='2'><i class='icon-expand'></i>Interfaces</td></tr></thead><tbody><tr><td id='SharedMap' nowrap><i class='icon-interface'></i><a class='link-discreet' href='../shareddata/SharedMap.type.html'>SharedMap</a></td><td><a class='link-one-self' title='Link to this declaration' href='../shareddata/index.html#SharedMap'><i class='icon-link'></i></a><div class='signature'><span class='modifiers'>shared</span> <a class='link' href='../shareddata/SharedMap.type.html' title='Go to io.vertx.ceylon.core.shareddata::SharedMap'>SharedMap</a>&lt;<span class='type-parameter'>Key</span>,<span class='type-parameter'>Item</span>&gt;</div><div class='description'><div class='doc section'><p>A shared map, this class does not use <span title='ceylon.collection::MutableMap'>ceylon.collection::MutableMap</span> at the moment to remain compatible between
Ceylon 1.0 and 1.1.</p>
<p>SharedMap has very similar semantics as ConcurrentMap with the difference that any updates made to
the collections returned from keySet, valueSet and entrySet methods do not change the keys and values in the
underlying Map.</p>
<p>This is because the Map can contain mutable data such as Buffer and byte[] objects so we must copy such elements
before they are returned to you. This prevents a situation where the same entry entry is being updated
concurrently by more than one thread, which could lead to race conditions.</p>
</div></div></td></tr><tr><td id='SharedSet' nowrap><i class='icon-interface'></i><a class='link-discreet' href='../shareddata/SharedSet.type.html'>SharedSet</a></td><td><a class='link-one-self' title='Link to this declaration' href='../shareddata/index.html#SharedSet'><i class='icon-link'></i></a><div class='signature'><span class='modifiers'>shared</span> <a class='link' href='../shareddata/SharedSet.type.html' title='Go to io.vertx.ceylon.core.shareddata::SharedSet'>SharedSet</a>&lt;<span class='type-parameter'>Element</span>&gt;</div><div class='description'><div class='doc section'><p>A shared set, this class does not use <span title='ceylon.collection::MutableSet'>ceylon.collection::MutableSet</span> at the moment to remain compatible between
Ceylon 1.0 and 1.1.</p>
</div></div></td></tr></tbody></table><table id='section-classes' class='table table-condensed table-bordered table-hover'><thead><tr class='table-header' title='Click for expand/collapse'><td colspan='2'><i class='icon-expand'></i>Classes</td></tr></thead><tbody><tr><td id='SharedData' nowrap><i class='icon-class'></i><a class='link-discreet' href='../shareddata/SharedData.type.html'>SharedData</a></td><td><a class='link-one-self' title='Link to this declaration' href='../shareddata/index.html#SharedData'><i class='icon-link'></i></a><div class='signature'><span class='modifiers'>shared</span> <a class='link' href='../shareddata/SharedData.type.html' title='Go to io.vertx.ceylon.core.shareddata::SharedData'>SharedData</a></div><div class='description'><div class='doc section'><p>Sometimes it is desirable to share immutable data between different event loops, for example to implement a
cache of data.</p>
<p>This class allows instances of shared data structures to be looked up and used from different event loops.</p>
<p>The data structures themselves will only allow certain data types to be stored into them. This shields you from
worrying about any thread safety issues might occur if mutable objects were shared between event loops.</p>
<p>The following types can be stored in a shareddata data structure:</p>
<ul>
<li><span title='ceylon.language::Integer'>Integer</span></li>
<li><span title='ceylon.language::String'>String</span></li>
<li><span title='ceylon.language::Float'>Float</span></li>
<li><span title='ceylon.language::Boolean'>Boolean</span></li>
<li>java.lang.ByteArray - this will be automatically copied, and the copy will be stored in the structure</li>
</ul>
<p>Instances of this class are thread-safe.</p>
</div></div></td></tr></tbody></table></div><script type='text/javascript'>var resourceBaseUrl = '../.resources/'</script><script type='text/javascript' src='../.resources/jquery-1.8.2.min.js'></script><script type='text/javascript' src='../.resources/bootstrap.min.js'></script><script type='text/javascript' src='../.resources/shCore.js'></script><script type='text/javascript' src='../.resources/shAutoloader.js'></script><script type='text/javascript' src='../.resources/shBrushCeylon.js'></script><script type='text/javascript' src='../.resources/index.js'></script><script type='text/javascript' src='../.resources/ceylondoc.js'></script><script type='text/javascript'>jQuery('html').keypress(function(evt){
  evt = evt || window.event;
  var keyCode = evt.keyCode || evt.which;
  if( !evt.ctrlKey && !evt.altKey ) {
    if (keyCode == 63) {
      $('#infoDropdown > .dropdown-toggle').click();
    }
    if(keyCode == 115){
      document.location = '../search.html';
    }
    if(keyCode == 99){
      document.location = '#section-classes';
    }
    if(keyCode == 112){
      document.location = 'index.html';
    }
    if(keyCode == 111){
      document.location = '../index.html';
    }
    if(keyCode == 105){
      document.location = '#section-interfaces';
    }
  }
});
enableInfoKeybordShortcut('\\?');
enableInfoKeybordShortcut('s');
enableInfoKeybordShortcut('c');
enableInfoKeybordShortcut('p');
enableInfoKeybordShortcut('o');
enableInfoKeybordShortcut('i');
</script></body></html>